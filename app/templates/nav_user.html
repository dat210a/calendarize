{% extends 'base.html' %} 
{% block title %}calendarize.user{% endblock %}
{% block nav %}
<link href="static/css/nav_user.css" type="text/css" rel="stylesheet" media="screen,projection" />
<ul id='settings_dropdown' class='dropdown-content accentgrey-dark accentgrey-light-text'>
    <li><a href="{{ url_for('index') }}">Homepage</a></li>
    <li><a href="#!" id="showFriends">Friends</a></li>
    <li><a href="#!" id="calendarsSettings">Calendars</a></li>
    <li><a href="#!" id="openProfile">Profile<i class="material-icons right">settings</i></a></li>
    <li class="divider"></li>
    <li>
        <a href="/logout">Logout<i class="material-icons right">power_settings_new</i></a>
    </li>
</ul>
<nav class="accentgrey-dark z-depth-3">
    <div class="nav-wrapper hide-on-med-and-down">
        <a href="#"><img src="static/images/logo_nav.png" class="placeholderimg"></a>
        <ul class="right">
            <li><a href="#!" id="showNotifications">
                <ul><li><i class="material-icons">notifications</i></li><li id="newNotifications"></li></ul></a>
            </li>
            <li><a id="navName" class="dropdown-button" href="#!" data-activates="settings_dropdown">{{name}}<i class="material-icons right">arrow_drop_down</i></a></li>
        </ul>
    </div>
</nav>
<script>
var numNotifications = '{{notifier}}'

function update_notifier(){
    $("#newNotifications").empty();
    if (numNotifications != 0)
        $("#newNotifications").append("<span class='new badge'>" + numNotifications + "</span>")
}

function refresh_name(name){
    $('#navName').empty()
    $('#navName').append(() => (name + "<i class='material-icons right'>arrow_drop_down</i>"))
}

$(document).ready(function(){
    update_notifier();
})
</script>
{% endblock %}
